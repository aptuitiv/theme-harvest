{# Set the column classes based on the number of columns #}
{% set count = columns|length %}
{% if count % 4 == 0 %}
    {% set class = 'u-size1of4 u-md-size1of2 u-sm-sizeFull u-margBottom2' %}
{% elseif count % 3 == 0 %}
    {% set class = 'u-size1of3 u-md-sizeFull u-margBottom3' %}
{% elseif count == 2 %}
    {% set class = 'u-size1of2 u-sm-size1of2 u-sm-sizeFull u-margBottom2' %}
{% elseif count > 4 %}
    {% set class = 'u-size1of4 u-md-size1of2 u-sm-sizeFull u-margBottom2' %}
{% elseif count == 1 %}
    {% set class = 'u-sizeFull u-margBottom2' %}
{% endif %}

<div class="Grid Grid--withGutterLg u-margTop2">
    {% for column in columns %}
        <div class="Grid-cell {{ class }}">
            {% if column.image.alt|length == 0 %}
                {% set column.image.alt = column.text %}
            {% endif %}
            {% set column.image.class = 'u-sizeFull' %}
            <a href="{{ column.link }}">{{ column.image.tag }}</a>
            <a href="{{ column.link }}" class="Button u-sizeFull">{{ column.text }} <i class="Icon Icon-right-dir"></i></a>
        </div>
    {% endfor %}
</div>
